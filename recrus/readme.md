# Тестовое задание (Backend)

Необходимо реализовать REST API, позволяющее пользователям бронировать временные слоты на спортивной площадке. Один заказ может включать несколько слотов. Пользователь проходит аутентификацию по приватному API токену.



> API должно поддерживать создание, изменение и просмотр бронирований, с проверкой пересечений по времени.





Примеры моделей


users

```
- id
- name
- api_token (string, unique)
- timestamps
```

bookings

```
- id
- user_id (FK)
- timestamps
```


booking_slots

```
- id
- booking_id (FK)
- start_time (datetime)
- end_time (datetime)
- timestemps
```



## Бизнес-правила
1. При создании брони пользователь может указать несколько временных слотов.

2. При обновлении можно:
   - изменить один слот (по slot_id);

   - добавить новый слот к уже существующему заказу.

3. Временные слоты не должны пересекаться с другими слотами на той же площадке (на уровне всей системы, не только у текущего пользователя) и внутри заказа.

4. Нельзя удалять или обновлять чужие бронирования.



## Требования к реализации
1. Миграции и сиды (создать нескольких пользователей с токенами).

2. CRUD API:

    - GET /api/bookings - список бронирований пользователя;

    - POST /api/bookings - создать бронирование с несколькими слотами;

    - PATCH /api/bookings/{booking}/slots/{slot} - обновить конкретный слот;

    - POST /api/bookings/{booking}/slots - добавить новый слот к существующему заказу;

    - DELETE /api/bookings/{booking} - удалить весь заказ.

3. Формат возвращаемых данных - JSON.

4. Авторизация по токену - без Laravel Passport/Sanctum, просто api_token.

5. Тесты (минимум):

    - Создание бронирования с несколькими слотами;

    - Добавление слота с конфликтом - ошибка;

    - Обновление слота - успешно/неуспешно;

    - Авторизация - запрос без токена отклоняется.



## Пример запроса: создание брони


POST /api/bookings


```json
{
    "slots": [
        {
            "start_time": "2025-06-25T12:00:00",
            "end_time": "2025-06-25T13:00:00"
        },
        {
            "start_time": "2025-06-25T13:30:00",
            "end_time": "2025-06-25T14:30:00"
        }
    ]
}
```
